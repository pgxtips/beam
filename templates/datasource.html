{% extends "layout.html" %}

{% block pageTitle%} beam | Dashboard | Monitor {% endblock %}

{% block contentTitle %} Data Source {% endblock %}

{% block head %} 
<script src="/js/pages/datasource/datasourceRedeemer.js"></script>
<script src="/js/pages/datasource/datasourcePoster.js"></script>
<script src="/js/pages/datasource/datasourceInit.js"></script>
<link rel="stylesheet" href="/css/datasource.css">
{% endblock %} 

{% block content %} 

<div class="card border-info mb-3">
  <div class="card-header">Information</div>
  <div class="card-body">
    <p class="card-text text-secondary">
    Use this page to connect Beam to your content catalogue. 
    Choose the source type (demo set, JSON file, or database), supply the file or 
    connection URL, and specify which column holds the content to distribute and 
    which holds the tags.  When you click **Save**, Beam imports the data, builds 
    its tag matrix, and the recommendation engine starts using your new catalogue 
    immediately.
    </p>
    <p class="card-text text-danger">
    **Be aware that changes to this will lose all recommendation training**
    </p>
  </div>
</div>


<form id="datasourceForm">
    <div id="selectInputCont" class="mb-3">
        <label for="selectInput" class="form-label">Source Select</label>
        <select id="selectInput" name="sourceType" class="form-select">
            <option selected>Select a Source</option>
            <option value="demo">Demo (File)</option>
            <option value="file">File (JSON)</option>
            <option value="database">Database</option>
        </select>
        <div id="selectInputHelp" class="form-text">A source which associates content IDs, content and tags together</div>
    </div>
    <div id="fileInputCont" class="mb-3" style="display: none;">
        <label for="fileInput" class="form-label">Source File</label>
        <input class="form-control" name="fileInput" type="file" id="fileInput" style="display: none;">
        <br/>
        <button id="fileInputButton" type="button" class="btn btn-primary">Upload</button>
        <span id="fileNameDisplay" class="ms-2">No file chosen</span>
        <div class="form-text">A JSON formatted file</div>
    </div>
    <div id="databaseInputCont" class="mb-3" style="display: none;">
        <label for="databaseInput" class="form-label">Connection URL</label>
        <input type="text" name="databaseInput" class="form-control" id="databaseInput">
        <div id="databaseInput" class="form-text">A database connection string eg. postgres://YourUserName:YourPassword@YourHostname:5432/YourDatabaseName</div>
    </div>
    <div id="selectContentCont" class="mb-3">
        <label for="selectContent" class="form-label">Select Content Column</label>
        <select id="selectContent" name="contentColumn" class="form-select">
            <option selected>Select Content Column</option>
        </select>
        <div id="selectContentHelp" class="form-text">Select the column label which contains the content to be delivered</div>
    </div>
    <div id="selectTagCont" class="mb-3">
        <label for="selectTag" class="form-label">Select Tag Column</label>
        <select id="selectTag" name="tagColumn" class="form-select">
            <option selected>Select Tag Column</option>
        </select>
        <div id="selectTagHelp" class="form-text">Select the column label which contains the tags</div>
    </div>

    <div id="saveButtons" class="mb-3" style="display: none;">
        <button class="btn btn-secondary">Cancel</button>
        <button id="submitButton" type="submit" class="btn btn-primary">Save</button>
    </div>
</form>
{% endblock %}
